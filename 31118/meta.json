{"ID":31118,"Author":{"Name":"GabLeRoux","ID":0,"FullName":"","Gravatar":"6d49e7c487938aac490de390f46a2d98"},"Title":"Convert a `git commit --amend` into a different commit","Description":"\u003cdiv class=\"content\"\u003e\u003cp\u003ethanks to \u003ccode\u003egit reflog\u003c/code\u003e, this is pure magic!\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003emkdir gitfun\ncd gitfun\n\ngit init\n\ntouch test\ngit add test\ngit commit -m \u0026#34;added test\u0026#34;\n\ntouch other_file\ngit add other_file\ngit commit --amend\n#\u0026#34;but this is a mistake\u0026#34;\n\ngit  reflog \u0026gt; some_temporary_reflog\ncat some_temporary_reflog\ngit checkout \u0026lt;HEAD@{1}: commit (initial): added test\u0026gt;\n# now in detached head\n\ngit cherry-pick \u0026lt;hash from HEAD@{0}: commit (amend): but this is a mistake\u0026gt; --no-commit\n# still on detashed head but with unstaged changes from wrong ammend\n\ngit commit -m \u0026#34;new commit I wanted to do before\u0026#34;\n\n# you can then reset a local branch to your current HEAD\ngit checkout -B master\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003ch2\u003eSome documentation:\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://en.wikibooks.org/wiki/Git/Internal_structure#The_Reflog\"\u003ehttps://en.wikibooks.org/wiki/Git/Internal_structure#The_Reflog\u003c/a\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eThe reflogs record changes that are not saved as part of the commit history—things like rebases, fast-forward merges, resets and the like. There is one reflog per branch. The reflog is not a public part of the repository, it is strictly specific to your local copy, and information is only kept in it for a limited time (2 weeks by default). It provides a safety net, allowing you to recover from mistakes like deleting or overwriting things you didn’t mean to.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.atlassian.com/git/tutorials/refs-and-the-reflog/the-reflog\"\u003ehttps://www.atlassian.com/git/tutorials/refs-and-the-reflog/the-reflog\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e","Time":"2015-12-03T15:39:27Z","Tags":["OS X","zsh","xterm-256color"]}